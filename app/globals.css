@tailwind base;
@tailwind components;
@tailwind utilities;

/* ═══ DESIGN TOKENS ═══ */
:root {
  --mint:#00D4AA; --mint-l:#E6FBF6; --mint-d:#00A888; --mint-g:rgba(0,212,170,.15);
  --coral:#FF6B6B; --coral-l:#FFF0F0;
  --elec:#5B5FFF; --elec-l:#F0F0FF;
  --gold:#FFB800; --gold-l:#FFF9E6;
  --suc:#10B981; --suc-l:#ECFDF5;
  --warn:#F59E0B; --warn-l:#FFFBEB;
  --err:#EF4444; --err-l:#FEF2F2;
  --g900:#18181B; --g800:#27272A; --g700:#3F3F46; --g600:#52525B; --g500:#71717A;
  --g400:#A1A1AA; --g300:#D4D4D8; --g200:#E4E4E7; --g100:#F4F4F5; --g50:#FAFAFA;
  --wh:#FFFFFF; --bg:#F8F9FB; --brd:#E4E4E7;
  --sans: 'Plus Jakarta Sans', -apple-system, sans-serif;
  --disp: 'Instrument Serif', Georgia, serif;
  --mono: 'JetBrains Mono', monospace;
  --r:6px; --rm:10px; --rl:14px; --rx:20px;
  --sh:0 1px 3px rgba(0,0,0,.04); --shm:0 4px 12px rgba(0,0,0,.06);
  --ease:cubic-bezier(.16,1,.3,1);
  /* shadcn compat */
  --background: 220 14% 97%;
  --foreground: 240 10% 3.9%;
  --card: 0 0% 100%;
  --card-foreground: 240 10% 3.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 240 10% 3.9%;
  --primary: 163 100% 42%;
  --primary-foreground: 0 0% 100%;
  --secondary: 240 4.8% 95.9%;
  --secondary-foreground: 240 5.9% 10%;
  --muted: 240 4.8% 95.9%;
  --muted-foreground: 240 3.8% 46.1%;
  --accent: 240 4.8% 95.9%;
  --accent-foreground: 240 5.9% 10%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 0 0% 98%;
  --border: 240 5.9% 90%;
  --input: 240 5.9% 90%;
  --ring: 163 100% 42%;
  --radius: 0.75rem;
}

@layer base {
  * { @apply border-border; }
}

/* ═══ GLOBAL ═══ */
body { font-family: var(--sans); background: var(--bg); color: var(--g800); }
a { text-decoration: none; color: inherit; }

/* ═══ SIDEBAR ═══ */
.sb { background: var(--wh); border-right: 1px solid var(--brd); display: flex; flex-direction: column; width: 260px; flex-shrink: 0; }
.sb-head { padding: 20px 24px; border-bottom: 1px solid var(--g100); }
.logo { font-family: var(--disp); font-size: 1.5rem; color: var(--g900); }
.logo b { color: var(--mint); }
.ss { margin: 16px 16px 8px; padding: 12px; background: var(--g50); border: 1px solid var(--brd); border-radius: var(--rl); }
.ss-row { display: flex; align-items: center; gap: 10px; }
.ss-icon { width: 36px; height: 36px; background: linear-gradient(135deg, var(--mint), var(--mint-d)); border-radius: var(--rm); display: flex; align-items: center; justify-content: center; font-size: 18px; }
.ss-name { font-size: 14px; font-weight: 700; color: var(--g900); }
.ss-url { font-size: 11px; color: var(--g500); }
.sb-nav { flex: 1; overflow-y: auto; }
.ns { padding: 16px 12px 8px; }
.nl { font-family: var(--mono); font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: .1em; color: var(--g400); padding: 0 12px; margin-bottom: 8px; }
.ni { display: flex; align-items: center; gap: 12px; padding: 10px 12px; border-radius: var(--rm); font-size: 14px; font-weight: 500; color: var(--g600); transition: all .15s; margin-bottom: 2px; text-decoration: none; cursor: pointer; }
.ni:hover { background: var(--g50); color: var(--g800); }
.ni.act { background: var(--mint-l); color: var(--mint-d); font-weight: 600; }
.ni.disabled { opacity: 0.4; cursor: not-allowed; }
.ni.disabled:hover { background: transparent; color: var(--g600); }
.ni-i { width: 20px; text-align: center; font-size: 16px; flex-shrink: 0; }
.ni-b { margin-left: auto; font-family: var(--mono); font-size: 10px; font-weight: 700; padding: 2px 8px; border-radius: 10px; background: var(--coral); color: var(--wh); }
.ni-soon { margin-left: auto; font-family: var(--mono); font-size: 9px; font-weight: 700; padding: 2px 8px; border-radius: 10px; background: var(--g100); color: var(--g400); }
.sb-ft { margin-top: auto; padding: 16px; border-top: 1px solid var(--g100); }
.sb-u { display: flex; align-items: center; gap: 12px; padding: 10px 12px; border-radius: var(--rm); transition: background .12s; text-decoration: none; }
.sb-u:hover { background: var(--g50); }
.sb-av { width: 36px; height: 36px; background: linear-gradient(135deg, var(--elec), #8B5CF6); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 700; color: var(--wh); flex-shrink: 0; }

/* ═══ TOPBAR ═══ */
.tb { display: flex; align-items: center; padding: 16px 32px; background: var(--wh); border-bottom: 1px solid var(--brd); gap: 12px; flex-shrink: 0; }
.tb-title { font-size: 18px; font-weight: 800; color: var(--g900); }
.tb-right { margin-left: auto; display: flex; align-items: center; gap: 8px; }
.tb-btn { width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; border-radius: var(--rm); color: var(--g500); font-size: 16px; position: relative; transition: all .12s; background: none; border: none; cursor: pointer; }
.tb-btn:hover { background: var(--g100); }
.tb-btn .dot { position: absolute; top: 6px; right: 6px; width: 8px; height: 8px; background: var(--coral); border-radius: 50%; border: 2px solid var(--wh); }
.tb-notif-wrap { position: relative; }
.tb-notif-dropdown { position: absolute; top: calc(100% + 8px); right: 0; width: 340px; background: var(--wh); border: 1px solid var(--brd); border-radius: var(--rl); box-shadow: 0 12px 32px rgba(0,0,0,.12); z-index: 100; animation: tbNotifIn .15s ease; overflow: hidden; }
@keyframes tbNotifIn { from { opacity: 0; transform: translateY(-4px); } to { opacity: 1; transform: translateY(0); } }
.tb-notif-head { display: flex; align-items: center; justify-content: space-between; padding: 14px 16px; border-bottom: 1px solid var(--g100); }
.tb-notif-title { font-size: 14px; font-weight: 800; color: var(--g900); }
.tb-notif-count { font-family: var(--mono); font-size: 10px; font-weight: 700; padding: 2px 8px; background: var(--coral-l); color: var(--coral); border-radius: 10px; }
.tb-notif-item { display: flex; align-items: flex-start; gap: 12px; padding: 12px 16px; transition: background .12s; cursor: pointer; border-bottom: 1px solid var(--g50); }
.tb-notif-item:hover { background: var(--g50); }
.tb-notif-item.unread { background: var(--mint-l); }
.tb-notif-item.unread:hover { background: #D1FAE5; }
.tb-notif-icon { width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; background: var(--g100); border-radius: var(--rm); font-size: 15px; flex-shrink: 0; }
.tb-notif-body { flex: 1; min-width: 0; }
.tb-notif-text { font-size: 13px; font-weight: 700; color: var(--g900); }
.tb-notif-detail { font-size: 12px; color: var(--g500); margin-top: 1px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.tb-notif-time { font-family: var(--mono); font-size: 10px; color: var(--g400); margin-top: 3px; }
.tb-notif-dot { width: 8px; height: 8px; background: var(--mint); border-radius: 50%; flex-shrink: 0; margin-top: 4px; }
.tb-notif-footer { padding: 10px 16px; text-align: center; font-size: 12px; font-weight: 700; color: var(--mint-d); cursor: pointer; transition: background .12s; }
.tb-notif-footer:hover { background: var(--g50); }
.btn-m { display: inline-flex; align-items: center; gap: 6px; padding: 8px 16px; font-size: 13px; font-weight: 700; background: var(--mint); color: var(--wh); border-radius: var(--rm); transition: all .15s; text-decoration: none; }
.btn-m:hover { background: var(--mint-d); transform: translateY(-1px); box-shadow: 0 4px 12px var(--mint-g); }

/* ═══ SCROLLBAR ═══ */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--g300); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--g400); }

/* ═══ ANIMATIONS ═══ */
@keyframes fadeInUp { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
.animate-fade-in-up { animation: fadeInUp 0.4s var(--ease) both; }
@keyframes pulse { 0%,100% { opacity: 1; } 50% { opacity: .3; } }

/* ═══ TIPTAP PROSE ═══ */
.ProseMirror { min-height: 400px; outline: none; padding: 1.5rem; }
.ProseMirror p.is-editor-empty:first-child::before { content: attr(data-placeholder); float: left; color: var(--g400); pointer-events: none; height: 0; }
.ProseMirror h1 { font-size: 1.75rem; font-weight: 800; margin-bottom: 0.75rem; line-height: 1.2; }
.ProseMirror h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 0.5rem; line-height: 1.3; }
.ProseMirror h3 { font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem; }
.ProseMirror p { margin-bottom: 0.75rem; line-height: 1.7; }
.ProseMirror ul, .ProseMirror ol { margin-bottom: 0.75rem; padding-left: 1.5rem; }
.ProseMirror li { margin-bottom: 0.25rem; }
.ProseMirror blockquote { border-left: 3px solid var(--mint); padding-left: 1rem; color: var(--g600); font-style: italic; }
.ProseMirror hr { border-color: var(--g200); margin: 1.5rem 0; }

/* ═══ RESPONSIVE ═══ */
@media (max-width: 1024px) { .sb { display: none; } }
